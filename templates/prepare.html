<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Avatar Chat - å‡†å¤‡é˜¶æ®µ</title>
    
    <!-- CSSæ ·å¼ -->
    <link rel="stylesheet" href="/static/css/main.css">
    <link rel="stylesheet" href="/static/css/prepare.css">
    
    <!-- Favicon -->
    <link rel="icon" type="image/png" href="/static/images/favicon.png">
</head>
<body>
    <div class="container">
        <header>
            <h1>AI Avatar Chat</h1>
            <p>å‡ ä¸ªç®€å•æ­¥éª¤ï¼Œåˆ›å»ºæ‚¨çš„ä¸“å±AIå¤´åƒåŠ©æ‰‹</p>
        </header>

        <!-- è¿›åº¦æŒ‡ç¤ºå™¨ -->
        <div class="progress-indicator">
            <div class="progress-step current">1</div>
            <div class="progress-step pending">2</div>
            <div class="progress-step pending">3</div>
        </div>

        <!-- æ­¥éª¤1: å›¾ç‰‡ä¸Šä¼  -->
        <div class="card" id="step1">
            <div class="step-title">æ­¥éª¤ 1: ä¸Šä¼ æ‚¨çš„å›¾ç‰‡</div>
            <div class="step-description">
                ä¸Šä¼ ä¸€å¼ æ¸…æ™°çš„äººåƒç…§ç‰‡ï¼Œæˆ‘ä»¬å°†æŠŠå®ƒè½¬æ¢ä¸ºå¡é€šå¤´åƒã€‚æ”¯æŒ JPEGã€PNGã€GIF æ ¼å¼ï¼Œæ–‡ä»¶å¤§å°ä¸è¶…è¿‡ 10MBã€‚
            </div>
            
            <div class="upload-area" id="uploadArea">
                <div class="upload-icon">ğŸ“·</div>
                <div class="upload-text">æ‹–æ‹½å›¾ç‰‡åˆ°è¿™é‡Œæˆ–ç‚¹å‡»é€‰æ‹©æ–‡ä»¶</div>
                <div class="upload-hint">æ”¯æŒ JPEGã€PNGã€GIF æ ¼å¼</div>
                <input type="file" id="fileInput" accept="image/*" style="display: none;" aria-label="é€‰æ‹©å›¾ç‰‡æ–‡ä»¶">
            </div>
            
            <!-- é”™è¯¯æç¤º -->
            <div class="hidden" id="uploadError" role="alert"></div>
            
            <!-- åŠ è½½çŠ¶æ€ -->
            <div class="hidden" id="uploadLoading"></div>
        </div>

        <!-- æ­¥éª¤2: å¤´åƒé€‰æ‹© -->
        <div class="card hidden" id="step2">
            <div class="step-title">æ­¥éª¤ 2: é€‰æ‹©æ‚¨çš„å¤´åƒ</div>
            <div class="step-description">
                ä»ä¸‹é¢çš„å¡é€šé£æ ¼ä¸­é€‰æ‹©æ‚¨æœ€å–œæ¬¢çš„ä¸€ä¸ªã€‚æ‚¨ä¹Ÿå¯ä»¥ä½¿ç”¨æ•°å­—é”® 1-4 å¿«é€Ÿé€‰æ‹©ã€‚
            </div>
            
            <!-- å¤´åƒç½‘æ ¼ -->
            <div class="avatar-grid" id="avatarGrid" role="group" aria-label="å¤´åƒé€‰é¡¹">
                <!-- å¤´åƒé€‰é¡¹å°†é€šè¿‡JavaScriptåŠ¨æ€æ·»åŠ  -->
            </div>
            
            <!-- é”™è¯¯æç¤º -->
            <div class="hidden" id="avatarError" role="alert"></div>
            
            <!-- åŠ è½½çŠ¶æ€ -->
            <div class="hidden" id="avatarLoading"></div>
            
            <!-- ç»§ç»­æŒ‰é’® -->
            <div class="continue-section">
                <button class="btn btn-primary" id="selectAvatarBtn" disabled>
                    <span class="btn-icon">âœ¨</span>
                    ç»§ç»­ç”Ÿæˆè¡¨æƒ…å’Œä¸ªæ€§
                </button>
            </div>
        </div>

        <!-- å¸®åŠ©æç¤º -->
        <div class="card" style="margin-top: 40px; background: rgba(255,255,255,0.95);">
            <h3 style="color: #667eea; margin-bottom: 15px;">ğŸ’¡ ä½¿ç”¨æç¤º</h3>
            <ul style="color: #666; line-height: 1.8;">
                <li><strong>æœ€ä½³æ•ˆæœï¼š</strong>ä½¿ç”¨æ­£é¢ã€æ¸…æ™°ã€å…‰çº¿å……è¶³çš„äººåƒç…§ç‰‡</li>
                <li><strong>é”®ç›˜å¿«æ·é”®ï¼š</strong>ä½¿ç”¨æ•°å­—é”® 1-4 å¿«é€Ÿé€‰æ‹©å¤´åƒ</li>
                <li><strong>å–æ¶ˆæ“ä½œï¼š</strong>æŒ‰ ESC é”®è¿”å›ä¸Šä¸€æ­¥</li>
                <li><strong>æ–‡ä»¶æ”¯æŒï¼š</strong>JPEGã€PNGã€GIF æ ¼å¼ï¼Œæœ€å¤§ 10MB</li>
            </ul>
        </div>
    </div>

    <!-- JavaScript -->
    <script src="/static/js/common.js"></script>
    <script src="/static/js/prepare.js"></script>
    
    <!-- æ— éšœç¢æ”¯æŒ -->
    <script>
        // æ·»åŠ é”®ç›˜å¯¼èˆªæ”¯æŒ
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Tab') {
                // ç¡®ä¿ç„¦ç‚¹å¯è§
                document.body.classList.add('keyboard-navigation');
            }
        });
        
        document.addEventListener('mousedown', function() {
            document.body.classList.remove('keyboard-navigation');
        });
    </script>
    
    <style>
        /* é”®ç›˜å¯¼èˆªæ—¶çš„ç„¦ç‚¹æ ·å¼ */
        .keyboard-navigation *:focus {
            outline: 3px solid #667eea;
            outline-offset: 2px;
        }
        
        /* é”™è¯¯æ¶ˆæ¯æ ·å¼å¢å¼º */
        .error-message {
            background: rgba(231, 76, 60, 0.1);
            border: 1px solid #e74c3c;
            color: #c0392b;
            padding: 15px;
            border-radius: 10px;
            margin: 15px 0;
            animation: shake 0.5s ease-in-out;
        }
        
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            75% { transform: translateX(5px); }
        }
        
        /* æˆåŠŸæ¶ˆæ¯æ ·å¼ */
        .success-message {
            background: rgba(46, 204, 113, 0.1);
            border: 1px solid #2ecc71;
            color: #27ae60;
            padding: 15px;
            border-radius: 10px;
            margin: 15px 0;
            animation: fadeInUp 0.5s ease-out;
        }
        
        /* å½•éŸ³æŒ‡ç¤ºå™¨æ ·å¼ */
        .recording-indicator {
            align-self: flex-start;
            background: rgba(231, 76, 60, 0.1);
            border: 1px solid #e74c3c;
            color: #c0392b;
            padding: 15px 20px;
            border-radius: 25px 25px 25px 8px;
            font-weight: 500;
            animation: pulse 1.5s infinite;
        }
    </style>
</body>
</html>